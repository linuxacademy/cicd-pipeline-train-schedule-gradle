plugins {
  id "com.github.node-gradle.node" version "3.2.1"
}

node {
	download = true
}

//declare a build task
task build

//declare a task to create a zip of the app
tasks.register('myzip', Zip) {
    archiveFileName = "trainSchedule.zip"
    destinationDirectory = layout.buildDirectory.dir('../dist')
    from ('.'){
                include "*"
                include "bin/**"
                include "data/**"
                include "node_modules/**"
                include "public/**"
                include "routes/**"
                include "views/**"
	      }
}



//declare task dependencies
build.dependsOn (myzip) //zip
myzip.dependsOn npm_build
npm_build.dependsOn (npm_test)
npm_test.dependsOn (npmInstall)
npm_build.dependsOn (npmInstall)
